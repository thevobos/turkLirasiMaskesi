$.fn.turkLirasi=function(a){var t=$.extend({allowedDecimal:!0,maxDecimalCount:2,convertFloat:!1,autoFillDecimal:!0,suffix:"TL",formatted:!0,autoSelect:!0,align:"left",_eventAfterSet:!1,_eventFocusOut:!1,debug:!1},a),e=function(a,t){a.data("options").debug&&console.log(t)},i=function(a){return 0==a?"":a},n=function(a){return""==a?0:a},l=function(a){return 0==a?"":" "+a},o=function(a,t){a.data("decimalPoint",t)},u=function(a){return a.data("decimalPoint")},s=function(a){a.data("options").allowedDecimal&&a.data("options").autoFillDecimal?(a.data("value","0"),a.data("visualValue","0,00"),o(a,!0),a.val(a.data("visualValue")+l(a.data("options").suffix))):(a.data("value",0),a.data("visualValue","0"),o(a,!1),a.val(a.data("visualValue")+l(a.data("options").suffix)))},r=function(a,t){return 0!=a.data("options")[t]},d=function(t,i,n){if(i=(i=""+i).replace(".",","),t.data("value",i),sections=i.split(","),t.data("options").formatted)var u=function(a,t,e,i){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+a)?+a:0,l=isFinite(+t)?Math.abs(t):0,o=void 0===i?",":i,u=void 0===e?".":e,s="";return(s=(l?function(a,t){var e=Math.pow(10,t);return""+Math.round(a*e)/e}(n,l):""+Math.round(n)).split("."))[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(s[1]||"").length<l&&(s[1]=s[1]||"",s[1]+=new Array(l-s[1].length+1).join("0")),s.join(u)}(sections[0],0,",",".");else u=i;var s;void 0!==sections[1]?(o(t,!0),u+=","+sections[1]):o(t,!1),t.data("visualValue",u),t.val((s=t.data("visualValue"),(1==a.convertFloat?s.replace(".","").replace(",","."):s)+l(t.data("options").suffix))),e(t,t.data()),void 0===n&&r(t,"_eventAfterSet")&&t.trigger("change",t.data("options")._eventAfterSet)},c=function(a){return 1==a.data("selectAll")&&(s(a),a.data("selectAll",!1),!0)};return this.each(function(){var a=$(this),f=$.meta?$.extend({},t,a.data()):t;o(a,!1),a.css("text-align",f.align),a.data("selectAll",!0),function(a,t){a.data("options",t);var e=a.val();e=e.replace(/\./g,"").replace(",","."),e=parseFloat(e),isNaN(e)?s(a):d(a,e,!0)}(a,f),$(this).click(function(){a.data("options").autoSelect&&(a.select(),a.data("selectAll",!0),e(a,"Tüm metin seçildi."))}),$(this).focusout(function(){if(a.data("options").allowedDecimal&&a.data("options").autoFillDecimal&&""!=a.data("value")&&"0"!=a.data("value")){if(sections=a.data("value").split(","),void 0===sections[1])var t=a.data("options").maxDecimalCount;else t=a.data("options").maxDecimalCount-sections[1].length;for(var e="",i=1;i<=t;i++)e+="0";u(a)||(e=","+e),o(a,!0),a.data("value",a.data("value")+e),a.data("visualValue",a.data("visualValue")+e),a.val(a.data("visualValue")+l(a.data("options").suffix))}r(a,"_eventFocusOut")&&a.trigger("change",a.data("options")._eventFocusOut)}),$(this).focus(function(){$(this).trigger("click")}),$(this).on("setAgain",function(a,t){t=(t=""+t).replace(/\./g,"").replace(",","."),d($(this),t)}),$(this).keydown(function(a){var t=$(this);""!=f.suffix&&0!=f.suffix&&f.suffix;var l=a.charCode||a.keyCode||0;if(e(t,"Pressed Key Code: #"+l),(a.ctrlKey||a.metaKey)&&86==l)return t.val(""),setTimeout(function(a){var e=t.val();e=e.replace(/\./g,"").replace(",","."),e=parseFloat(e),d(t,e)},0),!0;if((a.ctrlKey||a.metaKey)&&67==l)return!0;if(9==l||39==l||40==l)return t.data("selectAll",!1),!0;if(8==l){if(c(t))return!1;","==(s=i(t.data("value"))).substr(s.length-1)&&o(t,!1),s=s.substr(0,s.length-1),s=n(s),d(t,s),e(t,t.data())}else if(188==l&&t.data("options").allowedDecimal&&0==u(t)){var s=i(t.data("value"));d(t,s+=","),e(t,t.data())}else{if(!(l>=48&&l<=57||l>=96&&l<=105))return!1;c(t);var r=(s=i(t.data("value"))).split(",");if(u(t)&&void 0!==r[1]&&r[1].length==f.maxDecimalCount)return!1;if(l>=48&&l<=57)s+=String.fromCharCode(a.keyCode);else{s+={96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"}[l]}s=n(s),d(t,s),e(t,t.data())}return!1})})};
